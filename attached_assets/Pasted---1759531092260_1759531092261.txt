# نظام إدارة كروت المشاهدة - استراحة البرق نت

## 🎯 نظرة عامة
نظام متكامل لإدارة كروت الدخول لمشاهدة المسلسلات على الشبكة المحلية، مع خاصية ربط الحلقات والبوسترات مباشرة مع كل كرت.

## 🌐 معلومات الشبكة
- **نوع الشبكة: شبكة محلية (مودم)**
- **الاتصال: داخلي بدون إنترنت**
- **الوصول: عبر IP المحلي**
- **التخزين: محلي بالكامل**

## 📱 الوظائف الرئيسية

### 1. نظام الدخول (للمستخدم العادي)
- صفحة دخول بتحقق من رقم الكرت
- رقم الكرت بأي طول مرن
- كل كرت له حلقات مخصصة فقط
- تحقق من حالة الكرت (مفعل/موقف)
- إخراج تلقائي إذا تم إيقاف الكرت
- عرض الحلقات مع البوسترات
- عد تنازلي تلقائي بعد التحقق
- زر تحميل بجانب زر المشاهدة لكل حلقة
- فتح تلقائي للصفحة عند دخول IP الجهاز
- صفحة جدول النزول متاحة للجميع بدون دخول

### 2. نظام إنشاء الكروت (للمشرف)
- إنشاء كرت جديد مع:
  - رقم كرت بأي طول
  - عدد الحلقات المطلوبة
  - عدد الأجهزة المسموحة
  - تحكم في عدد الأجهزة المتصلة

- رفع الحلقات والبوسترات:
  - رفع ملفات فيديو متعددة
  - رفع بوسترات للحلقات
  - معاينة الملفات قبل الرفع
  - رفع دفعة واحدة بدون تحديث الصفحة
  - تحديد عدد الملفات بعدد الحلقات

### 3. لوحة التحكم (للمشرف)
- دخول منفصل تماماً عن واجهة المستخدم
- عرض وإدارة الكروت:
  - رقم الكرت والحالة
  - عدد الحلقات المرفوعة والمسموحة
  - عدد الأجهزة المتصلة والمسموحة
  - إحصائيات الاستخدام
- إمكانية تعديل الحلقات والبوسترات
- زر حذف الكرت مع تأكيد
- إدارة جدول نزول الحلقات

### 4. نظام المحتوى
- رفع وعرض المسلسلات
- ربط الحلقات والبوسترات مع الكروت
- صفحة مشاهد مع تحميل
- إمكانية تحميل الحلقات

### 5. صفحة جدول النزول
- متاحة للجميع بدون تسجيل دخول
- جدول أسبوعي ثابت (السبت إلى الجمعة)
- إدارة المشرف للجدول
- عرض مواعيد النزول وعدد الحلقات

## 🛠️ المتطلبات التقنية

### الواجهة الأمامية:
- HTML5, CSS3, JavaScript
- تصميم عربي متجاوب (RTL)
- واجهة حديثة مع سحب وإفلات
- معاينة الملفات قبل الرفع
- AJAX للرفع المتعدد

### الخلفية:
- PHP 7.4+
- JSON قاعدة بيانات
- جلسات آمنة
- دعم رفع ملفات الفيديو والصور

### الهيكل التنظيمي:
```
المشروع/
├── index.html              # دخول المستخدم
├── series.html             # عرض المسلسلات
├── watch.html              # المشاهدة
├── schedule.html           # جدول النزول
├── admin/
│   ├── index.html          # لوحة التحكم
│   ├── login.html          # دخول المشرف
│   ├── create-card.html    # إنشاء كروت
│   └── schedule-manager.html # إدارة الجدول
├── api/
│   ├── config.php          # الإعدادات
│   ├── verify-card.php     # التحقق من الكرت
│   ├── create-card.php     # إنشاء الكرت
│   ├── upload-episodes.php # رفع الحلقات
│   ├── delete-card.php     # حذف الكرت
│   ├── check-card-status.php # حالة الكرت
│   ├── device-tracker.php  # تتبع الأجهزة
│   └── schedule-api.php    # إدارة الجدول
├── uploads/                # الملفات
│   ├── episodes/           # الحلقات
│   ├── posters/            # البوسترات
│   └── thumbnails/         # الصور المصغرة
├── data/                   # قواعد البيانات
│   ├── cards.json          # الكروت
│   ├── series_data.json    # المسلسلات
│   ├── devices.json        # الأجهزة
│   └── schedule.json       # جدول النزول
├── css/                    # التنسيقات
└── js/                     # السكريبتات
```

## 🔄 تدفق العمل

### تدفق المستخدم:
1. الدخول على IP المودم → تحويل لصفحة الدخول
2. إمكانية مشاهدة جدول النزول بدون دخول
3. إدخال رقم الكرت → التحقق من الحالة والجهاز
4. الوصول للمحتوى → مراقبة مستمرة للحالة
5. إخراج فوري إذا تم إيقاف الكرت

### تدفق المشرف:
1. الدخول من رابط منفصل (/admin/login.html)
2. إنشاء كروت جديدة مع تحديد الأجهزة
3. رفع الحلقات والبوسترات دفعة واحدة
4. إدارة جدول النزول
5. مراقبة الأجهزة المتصلة

### تدفق الرفع:
1. تحديد عدد الحلقات المطلوبة
2. ضغط زر رفع الحلقات والبوسترات
3. سحب وإفلاع الملفات أو اختيارها
4. معاينة الملفات قبل الرفع
5. رفع جميع الملفات معاً
6. تأكيد الربط مع الكرت

## 🎨 متطلبات التصميم

### المظهر العام:
- واجهة عربية (من اليمين لليسار)
- ألوان: أزرق، بنفسجي، تدرجات داكنة
- تصميم حديث بتأثيرات زجاجية
- متجاوب مع جميع الشاشات

### العناصر البصرية:
- واجهة سحب وإفلات للرفع
- أزرار واضحة للتحميل والحذف
- مؤشرات بصرية للحالة
- رسائل تنبيه واضحة

## 🔒 متطلبات الأمان

### الحماية:
- تحقق من الصلاحيات
- تعقيم المدخلات
- سجل العمليات
- منع الوصول المباشر للملفات

### التحكم:
- تتبع الأجهزة المتصلة
- منع تجاوز عدد الأجهزة المسموحة
- إخراج تلقائي عند إيقاف الكرت
- إخفاء كامل لوحة التحكم عن المستخدمين

## ⚡ الميزات الخاصة

### الاستقرار:
- لا أخطاء اتصال (شبكة محلية)
- معالجة كاملة للأخطاء
- نسخ احتياطي للبيانات
- أداء سريع ومستقر

### المرونة:
- أطوال مرنة لأرقام الكروت
- رفع متعدد للملفات
- تحديثات حية للحالة
- واجهة سهلة الاستخدام

## 🚀 البدء

### المتطلبات:
- خادم ويب محلي (XAMPP/WAMP)
- PHP 7.4+
- مساحة تخزين كافية
- شبكة محلية عاملة

### التنفيذ:
1. تثبيت الملفات على الخادم المحلي
2. الضبط التلقائي للإعدادات
3. الوصول عبر: http://[IP-المحلي]
4. الإدارة عبر: http://[IP-المحلي]/admin/login.html

## ✅ الضمانات

### الأداء:
- تحميل سريع للملفات محلياً
- بث فيديو سلس بدون تقطيع
- استجابة فورية
- إدارة ذاكرة فعالة

### الموثوقية:
- لا انقطاع في الخدمة
- استمرارية الوصول
- حفظ البيانات آمن
- استرداد من الأخطاء

هذا النظام مصمم خصيصاً للعمل على الشبكات المحلية بالمودم، مع ضمان الاستقرار الكامل وسهولة الاستخدام! ادمج مه التصميم